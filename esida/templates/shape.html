{% extends 'base.html' %}

{% block title %}{{shape['name']}}{% endblock %}


{% block content %}
  <h1>{{ shape['name'] }}</h1>

  <div class="row">

    <div class="col col-md-6">


      <a href="{{ url_for('download_csv', shape_id=shape['id']) }}" download class="btn btn-primary">Parameters as CSV</a>

    </div>

    <div class="col col-md-6">
      <div id="map" class="mb-3" style="width: 100%; height: 400px"></div>

      <div class="mb-3">
        <label for="copy-wkt" class="form-label">Copy <abbr title="Well-known text">WKT</abbr>:</label>
        <div class="input-group">
          <input type="text" id="copy-wkt" class="form-control" value="{{ shape['wkt']|safe }}">
          <!-- <button class="btn btn-outline-secondary" type="button" id="copy-button">Copy</button> -->
        </div>
      </div>

    </div>
  </div>

{% endblock %}

{% block footer %}
<script>
  var osmUrl    = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
  var osmAttrib = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';
  var osm       = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib});

  var map_position = {lat: -6, lng: 35, zoom: 10};

  var map = L.map('map', {
    preferCanvas: true
  }).setView([map_position.lat, map_position.lng], map_position.zoom).addLayer(osm);

  shapes=[]
  var s = L.geoJSON({{ shape['geojson']|safe }} );
  shapes.push(s);
  var group_districts = L.featureGroup(shapes).addTo(map);
  map.fitBounds(group_districts.getBounds());

  var layerControl = L.control.layers().addTo(map);
  layerControl.addBaseLayer(osm, 'OSM');
  layerControl.addOverlay(group_districts, 'Districts');
  </script>
{% endblock %}
